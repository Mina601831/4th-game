<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=0.5">
    <title>ØªØ­Ø¯ÙŠ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø®ÙÙŠØ©</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Rubik', 'sans-serif'],
                    },
                    colors: {
                        blue: { 50: '#eff6ff', 100: '#dbeafe', 200: '#bfdbfe', 300: '#93c5fd', 400: '#60a5fa', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8', 800: '#1e40af', 900: '#1e3a8a' },
                        pink: { 50: '#fdf2f8', 100: '#fce7f3', 200: '#fbcfe8', 300: '#f9a8d4', 400: '#f472b6', 500: '#ec4899', 600: '#db2777', 700: '#be185d', 800: '#9d174d', 900: '#831843' },
                    }
                }
            }
        }
    </script>

    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            font-family: 'Rubik', sans-serif;
            background-color: #E0F7FA;
            overflow-x: hidden;
            user-select: none;
        }
        
        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes bounce { 0%, 100% { transform: translateY(-10%); } 50% { transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .bounce { animation: bounce 2s infinite; }
        .pulse { animation: pulse 2s infinite; }

        /* Grid Square Transitions */
        .grid-square {
            transition: transform 0.3s ease, opacity 0.3s ease;
            width: 100%;
            height: 100%;
            border-radius: 0 !important; /* Force sharp corners for full coverage */
        }
        
        /* When revealed, shrink to 0 to show image underneath */
        .grid-square.revealed {
            opacity: 0;
            transform: scale(0);
            pointer-events: none;
        }

        /* Modal Styles */
        .modal-overlay {
            transition: opacity 0.3s ease;
            opacity: 0;
            pointer-events: none;
        }
        .modal-overlay.open {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform: scale(0.8) translateY(20px);
        }
        .modal-overlay.open .modal-content {
            transform: scale(1) translateY(0);
        }
    </style>
</head>
<body class="text-slate-800 selection:bg-yellow-200">

    <!-- App Container -->
    <div id="app" class="min-h-screen relative">
        
        <!-- Start Screen -->
        <div id="start-screen" class="flex flex-col items-center justify-center min-h-screen p-4 relative overflow-hidden">
            <!-- Background Decorations -->
            <div class="absolute top-10 left-10 text-yellow-400 opacity-50 bounce delay-700">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
            </div>
            <div class="absolute bottom-20 right-20 text-pink-400 opacity-50 pulse">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
            </div>

            <div class="bg-white/80 backdrop-blur-lg p-8 md:p-12 rounded-[3rem] shadow-2xl w-full max-w-2xl border-4 border-white relative z-10 fade-in">
                <h1 class="text-5xl md:text-7xl font-black text-center mb-12 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 drop-shadow-sm">
                    ØªØ­Ø¯ÙŠ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø®ÙÙŠØ©
                </h1>
                
                <div class="space-y-6">
                    <div class="group">
                        <label class="block text-lg font-bold text-blue-600 mb-2 mr-2">Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„ (Ø§Ù„Ø£Ø²Ø±Ù‚)</label>
                        <input type="text" id="team1-input" class="w-full px-6 py-4 rounded-full bg-blue-50 border-2 border-blue-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-200 outline-none transition-all text-xl text-blue-900 placeholder-blue-300 shadow-inner" placeholder="Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„ÙƒÙ†ÙŠØ³Ø©...">
                    </div>
                    <div class="group">
                        <label class="block text-lg font-bold text-pink-600 mb-2 mr-2">Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ (Ø§Ù„Ø£Ø­Ù…Ø±)</label>
                        <input type="text" id="team2-input" class="w-full px-6 py-4 rounded-full bg-pink-50 border-2 border-pink-200 focus:border-pink-500 focus:ring-4 focus:ring-pink-200 outline-none transition-all text-xl text-pink-900 placeholder-pink-300 shadow-inner" placeholder="ÙØ±Ø³Ø§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†...">
                    </div>
                    
                    <button onclick="startGame()" class="w-full py-5 mt-8 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full font-black text-2xl text-white shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all border-b-4 border-orange-600 active:border-b-0 active:translate-y-1">
                        Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø©! ğŸš€
                    </button>
                </div>
            </div>
        </div>

        <!-- Game Screen (Hidden by default) -->
        <div id="game-screen" class="hidden flex-col h-screen overflow-hidden bg-gradient-to-b from-blue-50 to-purple-50">
            <!-- Header -->
            <header class="bg-white/80 backdrop-blur-md p-4 flex justify-between items-center shadow-sm border-b border-slate-100 z-20">
                <h2 class="text-2xl font-black text-slate-700 flex items-center gap-2">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="#FACC15" class="text-yellow-400"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                    ØªØ­Ø¯ÙŠ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø®ÙÙŠØ©
                </h2>
                <button onclick="resetGame()" class="px-6 py-2 bg-slate-100 hover:bg-red-100 text-slate-600 hover:text-red-600 rounded-full font-bold transition-colors border-2 border-slate-200 hover:border-red-200">
                    Ø®Ø±ÙˆØ¬
                </button>
            </header>

            <!-- Main Content -->
            <div class="flex-1 flex flex-col md:flex-row relative overflow-y-auto md:overflow-hidden">
                
                <!-- Team 1 Section -->
                <div id="team1-section" class="flex-1 flex flex-col items-center justify-center p-4 md:p-8 bg-blue-50/50 relative transition-colors duration-500">
                    <div class="mb-8 text-center px-8 py-4 rounded-3xl border-b-4 shadow-lg w-full max-w-md bg-white border-blue-200 text-blue-800 shadow-blue-100">
                        <h3 id="team1-name-display" class="text-3xl font-black mb-2">Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„</h3>
                        <div class="text-lg font-bold opacity-70">ØªÙ… ÙƒØ´Ù <span id="team1-score">0</span> Ù…Ù† 9</div>
                    </div>
                    
                    <!-- Game Board Wrapper -->
                    <div class="relative w-full max-w-[450px] aspect-square rounded-3xl overflow-hidden shadow-2xl border-8 border-white bg-slate-200 ring-4 ring-black/5">
                        <!-- The Hidden Image -->
                        <img src="https://e.top4top.io/p_3711ui6de1.jpg" class="absolute inset-0 w-full h-full object-cover" alt="Team 1">
                        
                        <!-- The Grid Overlay (Solid Cover) -->
                        <div id="team1-grid" class="absolute inset-0 grid grid-cols-3 grid-rows-3 gap-0">
                            <!-- Buttons injected by JS -->
                        </div>
                    </div>
                </div>

                <!-- Divider -->
                <div class="hidden md:flex w-2 bg-slate-200 relative z-10 items-center justify-center">
                    <div class="bg-white p-3 rounded-full border-4 border-slate-100 shadow-lg">
                        <span class="text-2xl font-black text-slate-300">VS</span>
                    </div>
                </div>

                <!-- Team 2 Section -->
                <div id="team2-section" class="flex-1 flex flex-col items-center justify-center p-4 md:p-8 bg-pink-50/50 relative transition-colors duration-500">
                    <div class="mb-8 text-center px-8 py-4 rounded-3xl border-b-4 shadow-lg w-full max-w-md bg-white border-pink-200 text-pink-800 shadow-pink-100">
                        <h3 id="team2-name-display" class="text-3xl font-black mb-2">Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ</h3>
                        <div class="text-lg font-bold opacity-70">ØªÙ… ÙƒØ´Ù <span id="team2-score">0</span> Ù…Ù† 9</div>
                    </div>
                    
                    <!-- Game Board Wrapper -->
                    <div class="relative w-full max-w-[450px] aspect-square rounded-3xl overflow-hidden shadow-2xl border-8 border-white bg-slate-200 ring-4 ring-black/5">
                        <!-- The Hidden Image -->
                        <img src="https://g.top4top.io/p_3711qj7c61.jpg" class="absolute inset-0 w-full h-full object-cover" alt="Team 2">
                        
                        <!-- The Grid Overlay (Solid Cover) -->
                        <div id="team2-grid" class="absolute inset-0 grid grid-cols-3 grid-rows-3 gap-0">
                            <!-- Buttons injected by JS -->
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Question Modal -->
        <div id="question-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
            <div class="modal-content bg-white rounded-[2rem] p-6 md:p-10 max-w-3xl w-full shadow-2xl relative overflow-hidden border-8 border-white ring-4 ring-yellow-200">
                <div id="modal-header-bar" class="absolute top-0 left-0 w-full h-4 bg-blue-400"></div>
                
                <div class="mb-8 text-center relative z-10">
                    <span id="modal-team-badge" class="inline-block px-4 py-2 rounded-full text-lg font-bold mb-6 bg-blue-100 text-blue-600">
                        Ø³Ø¤Ø§Ù„ Ù„Ù„ÙØ±ÙŠÙ‚
                    </span>
                    <h3 id="modal-question-text" class="text-2xl md:text-4xl font-black text-slate-800 leading-relaxed">
                        Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù‡Ù†Ø§ØŸ
                    </h3>
                </div>

                <div id="modal-options" class="grid grid-cols-1 gap-4">
                    <!-- Options injected by JS -->
                </div>

                <button onclick="closeModal()" class="absolute top-6 left-6 p-2 bg-slate-100 hover:bg-slate-200 rounded-full text-slate-400 hover:text-slate-600 transition-colors">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
                </button>
            </div>
        </div>

        <!-- Winner Modal -->
        <div id="winner-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md">
            <div class="modal-content bg-white p-12 rounded-[3rem] text-center space-y-8 max-w-2xl w-full shadow-2xl border-8 border-yellow-400 relative">
                <div class="absolute -top-16 left-1/2 -translate-x-1/2 bg-yellow-400 p-6 rounded-full border-8 border-white shadow-xl">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="white"><path d="M6 2L3 6v2h2v12h14V8h2V6l-3-4H6zm2 4h8v2H8V6zm2 4h4v8h-4v-8z"/></svg>
                </div>
                
                <div class="pt-8">
                    <h2 class="text-6xl font-black text-yellow-500 mb-4">Ù…Ø¨Ø±ÙˆÙƒ!</h2>
                    <div class="text-3xl text-slate-600 font-bold">
                        Ø§Ù„ÙØ§Ø¦Ø² Ù‡Ùˆ ÙØ±ÙŠÙ‚ <br/>
                        <span id="winner-name" class="text-6xl font-black mt-6 block text-blue-500">Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚</span>
                    </div>
                </div>

                <button onclick="resetGame()" class="px-10 py-4 bg-slate-900 text-white font-bold rounded-full text-xl hover:scale-105 transition-transform shadow-xl hover:shadow-2xl">
                    Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸ”„
                </button>
            </div>
        </div>

    </div>

    <!-- Game Logic -->
    <script>
        // --- Data ---
        const questionsPool = [
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø£ØµÙ„ Ø§Ù„Ù„ØºÙˆÙŠ Ù„ÙƒÙ„Ù…Ø© 'Ù„ÙŠØªØ±ÙˆØ¬ÙŠØ©' ÙˆÙ…Ø¹Ù†Ø§Ù‡Ø§ Ø§Ù„Ø¯Ù‚ÙŠÙ‚ØŸ", options: ["ÙƒÙ„Ù…Ø© ÙŠÙˆÙ†Ø§Ù†ÙŠØ© ØªØ¹Ù†ÙŠ Ø¹Ù…Ù„ Ø´Ø¹Ø¨ÙŠ", "ÙƒÙ„Ù…Ø© Ø³Ø±ÙŠØ§Ù†ÙŠØ© ØªØ¹Ù†ÙŠ Ø§Ù„ØªÙ‚Ø¯ÙŠØ³", "ÙƒÙ„Ù…Ø© Ù‚Ø¨Ø·ÙŠØ© ØªØ¹Ù†ÙŠ ØµÙ„Ø§Ø© Ø§Ù„ÙƒØ§Ù‡Ù†", "ÙƒÙ„Ù…Ø© Ø¹Ø¨Ø±ÙŠØ© ØªØ¹Ù†ÙŠ Ø°Ø¨ÙŠØ­Ø© Ø§Ù„Ø´ÙƒØ±"], correct: 0 },
            { q: "ØªØ¹ØªØ¨Ø± ÙƒÙ„Ù…Ø© 'Ù‚Ø¯Ø§Ø³' Ù…Ù† Ø£ØµÙ„ Ø³Ø±ÙŠØ§Ù†ÙŠØŒ ÙÙ…Ø§Ø°Ø§ ØªØ¹Ù†ÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø©ØŸ", options: ["Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ Ø§Ù„Ø¹Ø§Ù…", "Ø§Ù„ØªØ³Ø¨ÙŠØ­ Ø§Ù„Ù…Ø³ØªÙ…Ø±", "Ø§Ù„ØµØ¹ÙˆØ¯", "Ø§Ù„ØªÙ‚Ø¯ÙŠØ³"], correct: 3 },
            { q: "Ù…Ø§ Ø§Ù„Ù…Ù‚ØµÙˆØ¯ Ø¨Ù€ 'ØªÙ‚Ø¯ÙŠØ³ Ø§Ù„Ù…ÙƒØ§Ù†' ÙÙŠ Ø·Ù‚Ø³ Ø§Ù„Ù‚Ø¯Ø§Ø³ØŸ", options: ["Ø£Ù† Ø§Ù„Ù…ÙƒØ§Ù† ÙŠØ³Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµÙ„ÙŠÙ†", "Ø£Ù† Ø§Ù„Ù…ÙƒØ§Ù† ÙŠÙØ¨Ù†Ù‰ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø±Ø§Ø² Ø§Ù„Ù‚Ø¨Ø·ÙŠ", "Ø£Ù† Ø§Ù„Ù…ÙƒØ§Ù† ÙŠØµÙŠØ± ÙƒÙ†ÙŠØ³Ø©", "Ø£Ù† Ø§Ù„Ù…ÙƒØ§Ù† ÙŠØªØ²ÙŠÙ† Ø¨Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª"], correct: 2 },
            { q: "ÙƒÙ„Ù…Ø© 'Ø£Ù†Ø§ÙÙˆØ±Ø§' ØªØªÙƒÙˆÙ† Ù…Ù† Ù…Ù‚Ø·Ø¹ÙŠÙ†ØŒ ÙÙ…Ø§ Ù…Ø¹Ù†Ø§Ù‡Ù…Ø§ØŸ", options: ["ÙƒØ³Ø± Ø§Ù„Ø®Ø¨Ø²", "ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø´ÙƒØ±", "ØµØ¹ÙˆØ¯ Ø¥Ù„Ù‰ ÙÙˆÙ‚", "Ù†Ø²ÙˆÙ„ Ø§Ù„Ø±ÙˆØ­ Ø§Ù„Ù‚Ø¯Ø³"], correct: 2 },
            { q: "Ù„Ù…Ø§Ø°Ø§ Ø³Ù…ÙŠ Ø³Ø± Ø§Ù„ØªÙ†Ø§ÙˆÙ„ Ø¨Ù€ 'Ø¥ÙØ®Ø§Ø±Ø³ØªÙŠØ§'ØŸ", options: ["Ù„Ø£Ù† Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù‡Ùˆ Ø§Ù„Ø´ÙƒØ±", "Ù„Ø£Ù†Ù‡Ø§ ØªØ´ÙŠØ± Ø¥Ù„Ù‰ ØºØ³Ù„ Ø§Ù„Ø®Ø·Ø§ÙŠØ§", "Ù„Ø£Ù†Ù‡Ø§ ØªØ¹Ù†ÙŠ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ Ø§Ù„Ù…Ù‚Ø¯Ø³", "Ù„Ø£Ù†Ù‡Ø§ ØªØ±Ù…Ø² Ø¥Ù„Ù‰ Ø§Ù†ØªØµØ§Ø± Ø§Ù„Ù…Ø³ÙŠØ­"], correct: 0 },
            { q: "Ù…Ø§Ø°Ø§ Ù…ÙŠØ² 'Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰' Ù„Ù„Ù‚Ø¯Ø§Ø³ (Ù‚Ø¨Ù„ Ù…Ø¬Ù…Ø¹ Ù†ÙŠÙ‚ÙŠØ©)ØŸ", options: ["ÙƒØ§Ù† Ø§Ù„Ø£Ø³Ù‚Ù ÙŠØµÙ„ÙŠ Ø¨Ø¥Ù„Ù‡Ø§Ù… Ø§Ù„Ø±ÙˆØ­ Ø§Ù„Ù‚Ø¯Ø³", "ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ÙƒØªØ§Ø¨ ÙˆØ§Ø­Ø¯ Ù…ÙˆØ­Ø¯", "ÙƒØ§Ù†Øª Ø§Ù„ØµÙ„ÙˆØ§Øª ØªÙ‚Ø±Ø£ Ù…Ù† Ù„ÙØ§Ø¦Ù Ø³Ø±ÙŠØ§Ù†ÙŠØ©", "ÙƒØ§Ù† ÙŠÙ…Ù†Ø¹ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£ÙŠ ØµÙ„ÙˆØ§Øª"], correct: 0 },
            { q: "Ù…Ø§ Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„ØªØ¯ÙˆÙŠÙ† Ø§Ù„Ù†Øµ ÙˆØªØ«Ø¨ÙŠØªÙ‡ ÙÙŠ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ", options: ["Ø¶ÙŠØ§Ø¹ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø´ÙÙ‡ÙŠØ©", "Ø±ØºØ¨Ø© Ø§Ù„Ù…Ù„ÙˆÙƒ ÙÙŠ ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ù„ØºØ§Øª", "Ø·Ù„Ø¨ Ø§Ù„Ø±Ø³Ù„ ØªØ¯ÙˆÙŠÙ†Ù‡Ø§", "Ø¨Ø³Ø¨Ø¨ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù‡Ø±Ø·Ù‚Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©"], correct: 3 },
            { q: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø£ÙØ¹Ø§Ù„ Ø§Ù„Ø£Ø±Ø¨Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø¥ÙØ®Ø§Ø±Ø³ØªÙŠØ§ Ø­Ø³Ø¨ Ø§Ù„Ø¥Ù†Ø¬ÙŠÙ„ØŸ", options: ["Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…ØŒ Ø§Ù„Ø´ÙƒØ±ØŒ Ø§Ù„Ù‚Ø³Ù…Ø©ØŒ Ø§Ù„ØªÙ†Ø§ÙˆÙ„", "Ø§Ù„ØµÙˆÙ…ØŒ Ø§Ù„ØµÙ„Ø§Ø©ØŒ Ø§Ù„Ø³Ø¬ÙˆØ¯ØŒ Ø§Ù„Ø§Ø¹ØªØ±Ø§Ù", "Ø§Ù„ØªØ¹Ù…ÙŠØ¯ØŒ Ø§Ù„Ù…ÙŠØ±ÙˆÙ†ØŒ Ø§Ù„Ø²ÙˆØ§Ø¬ØŒ Ø§Ù„Ù‚Ø¯Ø§Ø³", "Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©ØŒ Ø§Ù„ÙˆØ¹Ø¸ØŒ Ø§Ù„ØªØ³Ø¨ÙŠØ­ØŒ Ø§Ù„ØµØ¯Ù‚Ø©"], correct: 0 },
            { q: "Ù…Ù† ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù„Ø·Ø© Ø§Ù„ÙˆØ­ÙŠØ¯ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø£ÙŠ Ø·Ù‚Ø³ ÙÙŠ Ø§Ù„ÙƒÙ†ÙŠØ³Ø© Ø§Ù„Ù‚Ø¨Ø·ÙŠØ©ØŸ", options: ["Ù„Ø¬Ù†Ø© Ø§Ù„Ø´Ù…Ø§Ù…Ø³Ø©", "Ø§Ù„Ø´Ø¹Ø¨ Ø¨Ø§Ù„ØªØµÙˆÙŠØª", "Ù‚Ø¯Ø§Ø³Ø© Ø§Ù„Ø¨Ø§Ø¨Ø§ ÙˆØ§Ù„Ù…Ø¬Ù…Ø¹ Ø§Ù„Ù…Ù‚Ø¯Ø³", "ÙƒÙ„ ÙƒØ§Ù‡Ù† Ø­Ø³Ø¨ Ø±Ø¤ÙŠØªÙ‡"], correct: 2 },
            { q: "ÙƒÙ… Ø¹Ø¯Ø¯ ÙƒØªØ¨ 'Ø§Ù„Ù‚Ø·Ù…Ø§Ø±Ø³' Ø§Ù„ØªÙŠ ØªØ³ØªØ®Ø¯Ù…Ù‡Ø§ Ø§Ù„ÙƒÙ†ÙŠØ³Ø© Ø§Ù„Ù‚Ø¨Ø·ÙŠØ©ØŸ", options: ["ÙƒØªØ§Ø¨ ÙˆØ§Ø­Ø¯ ÙƒØ¨ÙŠØ±", "12 ÙƒØªØ§Ø¨Ø§Ù‹", "5 ÙƒØªØ¨", "3 ÙƒØªØ¨"], correct: 2 },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø±Ù…Ø² 'Ø§Ù„Ø§Ø³Ø¨Ø§Ø¯ÙŠÙƒÙˆÙ†' Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ ÙˆØ³Ø· Ø§Ù„Ù‚Ø±Ø¨Ø§Ù†Ø©ØŸ", options: ["ÙŠØ±Ù…Ø² Ù„Ù„Ø³ÙŠØ¯Ø© Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡", "ÙŠØ±Ù…Ø² Ù„Ù„Ù€ 12 ØªÙ„Ù…ÙŠØ°Ø§Ù‹", "ÙŠØ±Ù…Ø² Ù„Ù„Ø³ÙŠØ¯ Ø§Ù„Ù…Ø³ÙŠØ­", "ÙŠØ±Ù…Ø² Ù„Ù„ÙƒÙ†ÙŠØ³Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©"], correct: 2 },
            { q: "ØªØ­ØªÙˆÙŠ Ø§Ù„Ù‚Ø±Ø¨Ø§Ù†Ø© Ø¹Ù„Ù‰ 12 ØµÙ„ÙŠØ¨Ø§Ù‹ØŒ ÙØ¥Ù„Ù‰ Ù…Ø§Ø°Ø§ ÙŠØ±Ù…Ø² Ø§Ù„Ø¹Ø¯Ø¯ØŸ", options: ["Ø£Ø³Ø¨Ø§Ø· Ø¥Ø³Ø±Ø§Ø¦ÙŠÙ„", "Ø´Ù‡ÙˆØ± Ø§Ù„Ø³Ù†Ø©", "Ø§Ù„Ø¢Ø¨Ø§Ø¡ Ø§Ù„Ø±Ø³Ù„", "Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø±"], correct: 2 },
            { q: "ØªÙˆØ¬Ø¯ 5 Ø«Ù‚ÙˆØ¨ ÙÙŠ Ø§Ù„Ù‚Ø±Ø¨Ø§Ù†Ø©ØŒ ÙÙ…Ø§ Ù‡ÙŠ Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø§Ù„ØªÙŠ ØªØ­Ù…Ù„Ù‡Ø§ØŸ", options: ["Ø¬Ø±Ø§Ø­Ø§Øª Ø§Ù„Ù…Ø³ÙŠØ­", "Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ø®Ù…Ø³", "Ø£Ø³ÙØ§Ø± Ù…ÙˆØ³Ù‰", "Ø§Ù„Ø­ÙˆØ§Ø³ Ø§Ù„Ø®Ù…Ø³"], correct: 0 },
            { q: "Ù…Ø§ Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ù‚ÙˆÙ„ 'ÙƒÙŠØ±ÙŠØ§Ù„ÙŠØ³ÙˆÙ†' ÙÙŠ ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø­Ù…Ù„ØŸ", options: ["3 Ù…Ø±Ø§Øª", "12 Ù…Ø±Ø©", "100 Ù…Ø±Ø©", "41 Ù…Ø±Ø©"], correct: 3 },
            { q: "Ù…ØªÙ‰ ÙŠÙØ±ØªÙ„ Ù„Ø­Ù† (Ù†Ù‰ ØµØ§ÙÙŠÙ ØªÙŠØ±Ùˆ)ØŸ", options: ["ÙÙŠ Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø­Ø§Ø¯", "Ø¹Ù†Ø¯ Ø­Ø¶ÙˆØ± Ø§Ù„Ø¨Ø·Ø±ÙŠØ±Ùƒ Ø£Ùˆ Ø§Ù„Ø£Ø³Ù‚Ù", "ÙÙŠ ÙƒÙ„ Ù‚Ø¯Ø§Ø³ Ø³Ù†ÙˆÙŠ", "Ø¹Ù†Ø¯ ØªØ°ÙƒØ§Ø± Ø§Ù„Ø³ÙŠØ¯Ø© Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡"], correct: 1 },
            { q: "Ù…Ø§ Ù…Ø¹Ù†Ù‰ Ù„Ø­Ù† 'Ø£Ù„Ù„ÙŠ Ø§Ù„Ù‚Ø±Ø¨Ø§Ù†'ØŸ", options: ["ÙŠÙÙ‚Ø§Ù„ Ø£Ø«Ù†Ø§Ø¡ Ø±Ø´ Ø§Ù„Ù…ÙŠØ§Ù‡", "Ù„ÙˆØ¯Ø§Ø¹ Ø§Ù„Ø­Ù…Ù„", "Ù…Ù‚Ø¯Ù…Ø© Ù„Ù„Ù…Ø²Ø§Ù…ÙŠØ± ÙˆÙ„Ø­Ù† ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø­Ù…Ù„", "Ù…Ø¯ÙŠØ­ Ù„Ù„Ù‚Ø¯ÙŠØ³ÙŠÙ†"], correct: 2 },
            { q: "Ù…Ø§ Ù‡ÙŠ Ø£ÙˆÙ„ Ø®Ø·ÙˆØ© ÙÙŠ ØªØ±ØªÙŠØ¨ Ø§Ù„Ù‚Ø¯Ø§Ø³ Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŸ", options: ["ØªØ³Ø¨Ø­Ø© Ù†ØµÙ Ø§Ù„Ù„ÙŠÙ„", "Ø±ÙØ¹ Ø¨Ø®ÙˆØ± Ø¨Ø§ÙƒØ±", "ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø­Ù…Ù„", "ØµÙ„Ø§Ø© Ø§Ù„ØºØ±ÙˆØ¨ ÙˆØµÙ„Ø§Ø© Ø§Ù„Ù†ÙˆÙ…"], correct: 3 },
            { q: "Ù…Ø§ Ø§Ù„Ù…Ù‚ØµÙˆØ¯ Ø¨Ù€ 'Ù‚Ø¯Ø§Ø³ Ø§Ù„ÙƒÙ„Ù…Ø©'ØŸ", options: ["Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØªØ¶Ù…Ù† Ø§Ù„Ù‚Ø±Ø§Ø¡Ø§Øª", "Ù„Ø­Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙˆØ±Ø©", "ÙˆÙ‚Øª ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø³Ù…Ø©", "Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ø³Ø±ÙŠØ© ÙÙˆÙ‚ Ø§Ù„ÙƒØ£Ø³"], correct: 0 },
            { q: "Ù…Ø§ Ø§Ù„Ø±Ø¯ Ø§Ù„Ø°ÙŠ ÙŠÙ‚ÙˆÙ„Ù‡ Ø§Ù„Ø´Ø¹Ø¨ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ù†Ø¬ÙŠÙ„ Ø§Ù„Ù‚Ø¨Ø·ÙŠØŸ", options: ["Ø¢Ù…ÙŠÙ† ÙƒÙŠØ±ÙŠØ§Ù„ÙŠØ³ÙˆÙ†", "Ø°ÙƒØ³Ø§Ø³Ù‰ ÙƒÙŠØ±ÙŠÙ‰", "ÙˆØ§Ø­Ø¯ Ù‡Ùˆ Ø§Ù„Ø¢Ø¨ Ø§Ù„Ù‚Ø¯ÙˆØ³", "Ù‡Ù„Ù„ÙŠÙ„ÙˆÙŠØ§"], correct: 1 },
            { q: "Ù…ØªÙ‰ ÙŠÙØµÙ„Ù‰ Ù„Ø­Ù† (Ø·Ø§Ù‰ Ø´ÙˆØ±Ù‰)ØŸ", options: ["Ø£ÙŠØ§Ù… Ø§Ù„Ø£ØµÙˆØ§Ù… ÙÙ‚Ø·", "ØµÙˆÙ… Ù†ÙŠÙ†ÙˆÙ‰ ÙÙ‚Ø·", "Ø£ÙŠØ§Ù… Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙˆØ§Ù„Ø³Ø¨ÙˆØª ÙˆØ§Ù„Ø¢Ø­Ø§Ø¯ Ø¨Ø§Ù„ØµÙˆÙ… Ø§Ù„ÙƒØ¨ÙŠØ±", "Ø¹ÙŠØ¯ Ø§Ù„ØµÙ„ÙŠØ¨ ÙÙ‚Ø·"], correct: 2 },
            { q: "Ù…Ø§ Ù‡Ùˆ 'Ø§Ù„Ø¨Ø±Ù„ÙƒØ³' ÙÙŠ Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„ÙƒÙ†Ø³ÙŠØŸ", options: ["ØµÙ„Ø§Ø© Ø³Ø±ÙŠØ©", "ÙƒÙ„Ù…Ø© ØªØ¹Ù†ÙŠ 'Ø¬Ù…Ù„Ø© Ù…Ù‚Ø§Ø¨Ù„ Ø¬Ù…Ù„Ø©'", "Ù†ÙˆØ¹ Ø¨Ø®ÙˆØ±", "Ù‚Ø±Ø§Ø¡Ø© Ù…Ù† Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø±Ø³Ù„"], correct: 1 },
            { q: "ÙÙŠ Ø£ÙŠ Ù…Ù†Ø§Ø³Ø¨Ø© ØªØµÙ„Ù‰ Ø£ÙˆØ´ÙŠØ© Ø§Ù„Ù…Ø±Ø¶Ù‰ ÙˆØ§Ù„Ù…Ø³Ø§ÙØ±ÙŠÙ†ØŸ", options: ["ÙƒØ¬Ø²Ø¡ Ù…Ù† ØµÙ„ÙˆØ§Øª Ø§Ù„Ù‚Ø¯Ø§Ø³", "ØµÙ„Ø§Ø© Ø§Ù„Ø¬Ù†Ø§Ø²", "ØªØ¯Ø´ÙŠÙ† Ø§Ù„Ù…Ø¹Ù…ÙˆØ¯ÙŠØ©", "Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ø¨ÙŠÙˆØª"], correct: 0 },
            { q: "Ù…Ø§Ø°Ø§ ØªØ¹Ù†ÙŠ ÙƒÙ„Ù…Ø© 'ÙƒØ§Ù‡Ù†' ÙÙŠ Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ÙŠÙˆÙ†Ø§Ù†ÙŠØ©ØŸ", options: ["Ø§Ù„Ø¨Ø§Ø±", "Ø®Ø§Ø¯Ù… Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©", "Ù†Ø§Ø¸Ø± Ù…Ù† ÙÙˆÙ‚", "Ø´ÙÙŠØ¹ Ø£Ùˆ ÙˆØ³ÙŠØ· Ø¨ÙŠÙ† Ø§Ù„Ù„Ù‡ ÙˆØ§Ù„Ù†Ø§Ø³"], correct: 3 }
        ];

        // --- State ---
        let gameState = {
            team1Name: '',
            team2Name: '',
            team1Revealed: [],
            team2Revealed: [],
            team1Questions: [],
            team2Questions: [],
            activeQuestion: null
        };

        // --- Utils ---
        function shuffle(array) {
            return [...array].sort(() => Math.random() - 0.5);
        }

        // --- Game Logic ---
        function startGame() {
            const t1Name = document.getElementById('team1-input').value.trim();
            const t2Name = document.getElementById('team2-input').value.trim();

            if (!t1Name || !t2Name) {
                alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚ÙŠÙ†");
                return;
            }

            // Setup State
            gameState.team1Name = t1Name;
            gameState.team2Name = t2Name;
            
            // Distribute Questions
            const shuffled = shuffle(questionsPool);
            gameState.team1Questions = shuffled.slice(0, 9);
            gameState.team2Questions = shuffled.slice(9, 18);
            
            // Update UI
            document.getElementById('team1-name-display').textContent = t1Name;
            document.getElementById('team2-name-display').textContent = t2Name;
            
            // Switch Screens
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            document.getElementById('game-screen').classList.add('flex');

            // Render Grids
            renderGrid('team1');
            renderGrid('team2');
        }

        function renderGrid(team) {
            const gridEl = document.getElementById(`${team}-grid`);
            gridEl.innerHTML = ''; // Clear
            
            const revealed = team === 'team1' ? gameState.team1Revealed : gameState.team2Revealed;
            const colorClass = team === 'team1' ? 'bg-blue-500 hover:bg-blue-600 border-blue-300' : 'bg-pink-500 hover:bg-pink-600 border-pink-300';

            for (let i = 0; i < 9; i++) {
                const btn = document.createElement('button');
                const isRevealed = revealed.includes(i);
                
                // Note: gap-0 is on the parent grid. 
                // We use w-full h-full to fill the cell completely.
                // border-white/20 adds a subtle grid line without gaps.
                btn.className = `grid-square relative flex items-center justify-center text-white font-black text-4xl border-[1px] border-white/20 z-10 ${isRevealed ? 'revealed' : 'cursor-pointer'} ${colorClass}`;
                btn.innerHTML = `<span class="drop-shadow-md">${i + 1}</span>`;
                btn.onclick = () => handleSquareClick(team, i);
                
                gridEl.appendChild(btn);
            }

            // Update Score
            document.getElementById(`${team}-score`).textContent = revealed.length;
        }

        function handleSquareClick(team, index) {
            const revealed = team === 'team1' ? gameState.team1Revealed : gameState.team2Revealed;
            if (revealed.includes(index)) return;

            const question = team === 'team1' ? gameState.team1Questions[index] : gameState.team2Questions[index];
            
            gameState.activeQuestion = {
                team,
                index,
                data: question
            };

            openModal();
        }

        function openModal() {
            const { team, data } = gameState.activeQuestion;
            const teamName = team === 'team1' ? gameState.team1Name : gameState.team2Name;
            const isBlue = team === 'team1';

            // Style Modal
            const headerBar = document.getElementById('modal-header-bar');
            const badge = document.getElementById('modal-team-badge');
            const modalContent = document.querySelector('#question-modal .modal-content');

            // Reset ring color
            modalContent.className = `modal-content bg-white rounded-[2rem] p-6 md:p-10 max-w-3xl w-full shadow-2xl relative overflow-hidden border-8 border-white ring-4 ${isBlue ? 'ring-blue-200' : 'ring-pink-200'}`;
            
            headerBar.className = `absolute top-0 left-0 w-full h-4 ${isBlue ? 'bg-blue-400' : 'bg-pink-400'}`;
            badge.className = `inline-block px-4 py-2 rounded-full text-lg font-bold mb-6 ${isBlue ? 'bg-blue-100 text-blue-600' : 'bg-pink-100 text-pink-600'}`;
            badge.textContent = `Ø³Ø¤Ø§Ù„ Ù„Ù€ ${teamName}`;

            document.getElementById('modal-question-text').textContent = data.q;

            // Render Options
            const optionsContainer = document.getElementById('modal-options');
            optionsContainer.innerHTML = '';
            
            data.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "p-5 bg-slate-50 hover:bg-yellow-50 border-2 border-slate-200 hover:border-yellow-400 rounded-2xl text-xl font-bold text-slate-700 hover:text-yellow-700 transition-all text-right group flex items-center justify-between shadow-sm hover:shadow-md hover:-translate-y-1";
                btn.innerHTML = `
                    <span class="flex items-center gap-4">
                        <span class="w-8 h-8 rounded-full bg-slate-200 group-hover:bg-yellow-200 flex items-center justify-center text-sm font-black text-slate-500 group-hover:text-yellow-700">${idx + 1}</span>
                        ${opt}
                    </span>
                    <span class="opacity-0 group-hover:opacity-100 text-yellow-500 transition-opacity">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
                    </span>
                `;
                btn.onclick = () => handleAnswer(idx);
                optionsContainer.appendChild(btn);
            });

            document.getElementById('question-modal').classList.add('open');
        }

        function closeModal() {
            document.getElementById('question-modal').classList.remove('open');
            gameState.activeQuestion = null;
        }

        function handleAnswer(selectedIndex) {
            const { team, index, data } = gameState.activeQuestion;
            
            if (selectedIndex === data.correct) {
                // Correct
                confetti({
                    particleCount: 150,
                    spread: 100,
                    origin: { y: 0.6 },
                    colors: ['#FFD700', '#FF69B4', '#00CED1', '#32CD32']
                });

                if (team === 'team1') gameState.team1Revealed.push(index);
                else gameState.team2Revealed.push(index);

                closeModal();
                renderGrid(team);
                checkWinner(team);

            } else {
                // Incorrect
                let revealed = team === 'team1' ? gameState.team1Revealed : gameState.team2Revealed;
                let message = "Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";

                if (revealed.length > 0) {
                    // Penalty
                    const randomIndex = Math.floor(Math.random() * revealed.length);
                    revealed.splice(randomIndex, 1);
                    message = "Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! ğŸ˜¢ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØºØ·ÙŠØ© Ù…Ø±Ø¨Ø¹ ÙƒØ¹Ù‚Ø§Ø¨.";
                }

                closeModal();
                setTimeout(() => alert(message), 300);
                renderGrid(team);
            }
        }

        function checkWinner(team) {
            const revealed = team === 'team1' ? gameState.team1Revealed : gameState.team2Revealed;
            if (revealed.length === 9) {
                const winnerName = team === 'team1' ? gameState.team1Name : gameState.team2Name;
                const colorClass = team === 'team1' ? 'text-blue-500' : 'text-pink-500';
                
                const winnerNameEl = document.getElementById('winner-name');
                winnerNameEl.textContent = winnerName;
                winnerNameEl.className = `text-6xl font-black mt-6 block ${colorClass}`;
                
                setTimeout(() => {
                    document.getElementById('winner-modal').classList.add('open');
                    confetti({ particleCount: 500, spread: 160, origin: { y: 0.6 } });
                }, 500);
            }
        }

        function resetGame() {
            gameState.team1Revealed = [];
            gameState.team2Revealed = [];
            gameState.team1Name = '';
            gameState.team2Name = '';
            
            document.getElementById('team1-input').value = '';
            document.getElementById('team2-input').value = '';
            
            document.getElementById('winner-modal').classList.remove('open');
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('flex');
            document.getElementById('start-screen').classList.remove('hidden');
        }
    </script>
</body>
</html>
